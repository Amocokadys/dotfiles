#!/bin/bash

usage()
{
	echo "usage: aubash /path/to/file"
	echo "       aubash -h"
}

# variables: 
SCRIPT_FILE=""

while [ "$1" != "" ]; do
	case $1 in
		-h | --help )
			usage
			exit
			;;
		* )
			SCRIPT_FILE=`realpath $1`
	esac
	shift
done


# tests if the user indicated a filename
if [ -n $SCRIPT_FILE ]; then
	# tests if the file already exists (for security)
	if [[ -f SCRIPT_FILE ]]; then
		# if the file already exists, it opens it
		vim $SCRIPT_FILE
	else
		# creates a file in the bin folder and add the #! at the end
		echo '#!/bin/bash' > $SCRIPT_FILE
		# makes it executable
		chmod +x $SCRIPT_FILE
		# opens the new file in vim
		vim $SCRIPT_FILE
	fi
else
	usage
fi
